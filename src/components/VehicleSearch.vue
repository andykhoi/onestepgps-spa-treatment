<script setup>
import { computed } from 'vue'
import { useStore } from 'vuex'
const store = useStore()

const searchText = computed({
  get: () => store.state.vehicleFilters.searchText,
  set: (value) => store.commit('SET_VEHICLE_FILTER_SEARCH_TEXT', value)
})

const showModal = (modalName, id) => {
  store.dispatch('showModal', { modalName, id })
}
</script>

<template>
  <div class="vehicle-search-wrapper">
    <div class="vehicle-search">
      <div class="search-icon">
        <svg
          width="28"
          height="28"
          viewBox="0 0 28 28"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M25.1191 23.8809L19.6427 18.4056C21.2299 16.5 22.0215 14.0558 21.8525 11.5814C21.6836 9.10709 20.5672 6.79313 18.7357 5.12091C16.9041 3.4487 14.4984 2.54697 12.0189 2.60332C9.53944 2.65967 7.17715 3.66976 5.42345 5.42345C3.66976 7.17715 2.65967 9.53944 2.60332 12.0189C2.54697 14.4984 3.4487 16.9041 5.12091 18.7357C6.79313 20.5672 9.10709 21.6836 11.5814 21.8525C14.0558 22.0215 16.5 21.2299 18.4056 19.6427L23.8809 25.1191C23.9622 25.2004 24.0588 25.2649 24.165 25.3089C24.2712 25.3528 24.385 25.3755 24.5 25.3755C24.615 25.3755 24.7288 25.3528 24.835 25.3089C24.9413 25.2649 25.0378 25.2004 25.1191 25.1191C25.2004 25.0378 25.2649 24.9413 25.3089 24.835C25.3528 24.7288 25.3755 24.615 25.3755 24.5C25.3755 24.385 25.3528 24.2712 25.3089 24.165C25.2649 24.0588 25.2004 23.9622 25.1191 23.8809ZM4.37501 12.25C4.37501 10.6925 4.83687 9.16993 5.70218 7.87489C6.5675 6.57985 7.79741 5.57049 9.23637 4.97445C10.6753 4.37841 12.2587 4.22246 13.7863 4.52632C15.3139 4.83018 16.7171 5.5802 17.8185 6.68154C18.9198 7.78288 19.6698 9.18607 19.9737 10.7137C20.2776 12.2413 20.1216 13.8247 19.5256 15.2636C18.9295 16.7026 17.9202 17.9325 16.6251 18.7978C15.3301 19.6631 13.8075 20.125 12.25 20.125C10.1621 20.1227 8.16045 19.2923 6.6841 17.8159C5.20775 16.3396 4.37732 14.3379 4.37501 12.25Z"
            fill="black"
          />
        </svg>
      </div>
      <input
        v-model="searchText"
        class="vehicle-search-input"
        type="text"
        placeholder="A title, license plate number, vin, etc."
      />
    </div>
    <div class="vehicle-search-filter" @click="showModal('errorModal', null)">
      <svg
        width="28"
        height="28"
        viewBox="0 0 36 36"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.625 12.0937H10.4906C10.6843 13.0474 11.2017 13.9048 11.9552 14.5207C12.7086 15.1365 13.6519 15.4729 14.625 15.4729C15.5981 15.4729 16.5414 15.1365 17.2948 14.5207C18.0483 13.9048 18.5657 13.0474 18.7594 12.0937H30.375C30.5988 12.0937 30.8134 12.0048 30.9716 11.8466C31.1299 11.6883 31.2188 11.4737 31.2188 11.25C31.2188 11.0262 31.1299 10.8116 30.9716 10.6533C30.8134 10.4951 30.5988 10.4062 30.375 10.4062H18.7594C18.5657 9.45253 18.0483 8.59512 17.2948 7.97926C16.5414 7.36341 15.5981 7.02698 14.625 7.02698C13.6519 7.02698 12.7086 7.36341 11.9552 7.97926C11.2017 8.59512 10.6843 9.45253 10.4906 10.4062H5.625C5.40122 10.4062 5.18661 10.4951 5.02838 10.6533C4.87014 10.8116 4.78125 11.0262 4.78125 11.25C4.78125 11.4737 4.87014 11.6883 5.02838 11.8466C5.18661 12.0048 5.40122 12.0937 5.625 12.0937ZM14.625 8.71871C15.1256 8.71871 15.615 8.86716 16.0313 9.1453C16.4475 9.42344 16.772 9.81877 16.9636 10.2813C17.1552 10.7438 17.2053 11.2528 17.1076 11.7438C17.0099 12.2348 16.7689 12.6858 16.4149 13.0398C16.0609 13.3938 15.6098 13.6349 15.1188 13.7326C14.6278 13.8302 14.1189 13.7801 13.6563 13.5885C13.1938 13.3969 12.7985 13.0725 12.5203 12.6562C12.2422 12.24 12.0938 11.7506 12.0938 11.25C12.0938 10.5786 12.3604 9.9348 12.8351 9.46009C13.3098 8.98539 13.9537 8.71871 14.625 8.71871ZM30.375 23.9062H27.7594C27.5657 22.9525 27.0483 22.0951 26.2948 21.4793C25.5414 20.8634 24.5981 20.527 23.625 20.527C22.6519 20.527 21.7086 20.8634 20.9552 21.4793C20.2017 22.0951 19.6843 22.9525 19.4906 23.9062H5.625C5.40122 23.9062 5.18661 23.9951 5.02838 24.1533C4.87014 24.3116 4.78125 24.5262 4.78125 24.75C4.78125 24.9737 4.87014 25.1883 5.02838 25.3466C5.18661 25.5048 5.40122 25.5937 5.625 25.5937H19.4906C19.6843 26.5474 20.2017 27.4048 20.9552 28.0207C21.7086 28.6365 22.6519 28.9729 23.625 28.9729C24.5981 28.9729 25.5414 28.6365 26.2948 28.0207C27.0483 27.4048 27.5657 26.5474 27.7594 25.5937H30.375C30.5988 25.5937 30.8134 25.5048 30.9716 25.3466C31.1299 25.1883 31.2188 24.9737 31.2188 24.75C31.2188 24.5262 31.1299 24.3116 30.9716 24.1533C30.8134 23.9951 30.5988 23.9062 30.375 23.9062ZM23.625 27.2812C23.1244 27.2812 22.635 27.1328 22.2187 26.8546C21.8025 26.5765 21.478 26.1812 21.2864 25.7186C21.0948 25.2561 21.0447 24.7472 21.1424 24.2561C21.2401 23.7651 21.4811 23.3141 21.8351 22.9601C22.1891 22.6061 22.6402 22.365 23.1312 22.2673C23.6222 22.1697 24.1311 22.2198 24.5937 22.4114C25.0562 22.603 25.4515 22.9274 25.7297 23.3437C26.0078 23.7599 26.1562 24.2493 26.1562 24.75C26.1562 25.4213 25.8896 26.0651 25.4149 26.5398C24.9402 27.0145 24.2963 27.2812 23.625 27.2812Z"
          fill="black"
        />
      </svg>
      <p>Filters</p>
    </div>
  </div>
</template>

<style scoped>
.vehicle-search-wrapper {
  display: flex;
}

.vehicle-search-filter {
  padding: 12px 24px;
  display: flex;
  align-items: center;
  gap: 12px;
  margin-right: 20px;
  background-color: #e3e3e3;
  border: 1px solid #d4d4d4;
  /* border-top: 1px solid #d4d4d4;
  border-right: 1px solid #d4d4d4;
  border-bottom: 1px solid #d4d4d4; */
  border-top-right-radius: 24px;
  border-bottom-right-radius: 24px;
  cursor: pointer;
}

.vehicle-search-filter:hover {
  background-color: hsl(0, 0%, 87%);
}
.vehicle-search-filter p {
  display: none;
  font-size: 0.9rem;
}
.vehicle-search {
  flex-grow: 2;
  display: flex;
  padding: 16px 20px;
  background-color: #e3e3e3;
  border-top-left-radius: 24px;
  border-bottom-left-radius: 24px;
  margin-left: 20px;
  border-top: 1px solid #d4d4d4;
  border-bottom: 1px solid #d4d4d4;
  border-left: 1px solid #d4d4d4;
}

.vehicle-search-input {
  appearance: none;
  margin-left: 12px;
  border: none;
  width: 100%;
  background-color: transparent;
  font-size: 0.9rem;
}

.vehicle-search-input::placeholder {
  color: #303030;
  opacity: 1; /* Firefox */
}

.vehicle-search-input::-ms-input-placeholder {
  color: #303030;
}

@media screen and (min-width: 768px) {
  .vehicle-search {
    margin-left: 20px;
  }

  .vehicle-search {
    padding: 12px 20px;
  }

  .vehicle-search-filter p {
    display: block;
  }
}

@media screen and (min-width: 992px) {
  .vehicle-search-filter {
    margin-right: 0;
  }
  .vehicle-search {
    margin: 0;
  }
}
</style>
